!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t=t||self).vueFunctionApi={})}(this,function(t){"use strict";var n=function(t){return Object.prototype.toString.call(t)},e="function"==typeof Symbol&&Symbol.for,o=function(t){return t},r=Object.prototype.hasOwnProperty;function u(t,n){return r.call(t,n)}function i(t){return"[object Array]"===n(t)}function c(t){return"[object Object]"===n(t)}var f=null,a=null;function s(){return f}function l(){return a}function p(t){a=t}var d=function(){function t(){}return t.prototype.setPropertyName=function(t){this._name=t},t}(),v=function(t,n){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};function h(t,n){function e(){this.constructor=t}v(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}var y=function(){return(y=Object.assign||function(t){for(var n,e=1,o=arguments.length;e<o;e++)for(var r in n=arguments[e])Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}).apply(this,arguments)},b=function(t){function n(n){var e=t.call(this)||this;return e._interal=n,e}return h(n,t),Object.defineProperty(n.prototype,"value",{get:function(){return this._interal.$$state},set:function(t){this._interal.$$state=t},enumerable:!0,configurable:!0}),n}(d),g=function(t){function n(n){var e=t.call(this)||this;return e._interal=n,e}return h(n,t),Object.defineProperty(n.prototype,"value",{get:function(){return this._interal.read()},set:function(t){this._interal.write&&this._interal.write(t)},enumerable:!0,configurable:!0}),n}(d);function w(t){return t instanceof d}function _(t){return l()}function $(t){var n=s();if(n.observable)return n.observable(t);var e=n.config.silent;n.config.silent=!0;var o=new n({data:{$$state:t}});return n.config.silent=e,o._data.$$state}function m(t,n){f&&f===t||(t.config.optionMergeStrategies.setup=function(t,n){return function(o){return function t(n,o){if(!o)return n;for(var r,i,f,a=e?Reflect.ownKeys(o):Object.keys(o),s=0;s<a.length;s++)"__ob__"!==(r=a[s])&&(i=n[r],f=o[r],u(n,r)?i!==f&&c(i)&&!w(i)&&c(f)&&!w(i)&&t(i,f):n[r]=f);return n}("function"==typeof n&&n.call(this,o)||{},"function"==typeof t&&t.call(this,o)||{})}},f=t,n(t))}function j(t){t.mixin({created:function(){var t=this,n=t.$options.setup;if(n){var e;try{p(t),e=n.call(t,t.$props)}catch(t){console.log(t)}finally{p(null)}if(!e)return;Object.keys(e).forEach(function(n){var r,u,i,c,f=e[n];w(f)?(f.setPropertyName(n),r=t,u=n,i=function(){return f.value},c=function(t){f.value=t},O.get=i,O.set=c||o,Object.defineProperty(r,u,O)):t[n]=f})}}})}var O={enumerable:!0,configurable:!0,get:o,set:o};function k(t){for(var n=Object.keys(t),e=0;e<n.length;e++){var o=n[e],r=t[o];w(r)?t[o]=r.value:(c(r)||i(r))&&(t[o]=k(r))}return t}var P=function(t){return"on"+(t[0].toUpperCase()+t.slice(1))};function S(t){return function(n){_(P(t)).$on("hook:"+t,n)}}var E,U=S("created"),x=S("beforeMount"),z=S("mounted"),M=S("beforeUpdate"),A=S("updated"),C=S("activated"),D=S("deactivated"),V=S("beforeDestroy"),B=S("destroyed"),F=S("errorCaptured"),H=(E=["destroyed","deactivated"],P("unmounted"),function(t){var n=_();E.forEach(function(e){return n.$on("hook:"+e,t)})});function N(t){return e?Symbol.for(t):t}var Q=N("vfa.key.preFlushQueue"),K=N("vfa.key.postFlushQueue");function R(t){return function(){T(this,t)}}function T(t,n){for(var e=t[n],o=0;o<e.length;o++)e[o]();e.length=0}function q(t,n,e){function o(){t.$nextTick(function(){t[Q].length&&T(t,Q),t[K].length&&T(t,K)})}switch(e){case"pre":o(),t[Q].push(n);break;case"post":o(),t[K].push(n);break;case"auto":case"sync":n();break;default:!function(t,n){if(!t)throw new Error("[vue-function-api] "+n)}(!1,'flush must be one of ["post", "pre", "sync"], but got '+e)}}var G=function(t){return m(t,j)},I={install:G};f&&"undefined"!=typeof window&&window.Vue&&G(window.Vue),t.computed=function(t,n){var e=function(t){var n=s(),e=n.config.silent;n.config.silent=!0;var o=new n({computed:t});return n.config.silent=e,o}({$$state:n?{get:t,set:n}:t});return new g({read:function(){return e.$$state},write:function(t){e.$$state=t}})},t.inject=function(t){if(t)return function(t,n){for(var e=n;e;){if(e._provided&&u(e._provided,t))return e._provided[t];e=e.$parent}}(t,_())},t.onActivated=C,t.onBeforeDestroy=V,t.onBeforeMount=x,t.onBeforeUpdate=M,t.onCreated=U,t.onDeactivated=D,t.onDestroyed=B,t.onErrorCaptured=F,t.onMounted=z,t.onUnmounted=H,t.onUpdated=A,t.plugin=I,t.provide=function(t){if(t){var n=_();n._provided="function"==typeof t?t.call(n):t}},t.state=function(t){return $(k(t))},t.value=function(t){return new b($({$$state:k(t)}))},t.watch=function(t,n,e){void 0===e&&(e={});var o=y({lazy:!1,deep:!1,flush:"post"},e),r=l();if(!r){var u=s(),c=u.config.silent;u.config.silent=!0,r=new u,u.config.silent=c,o.flush="auto"}return function(t){return void 0!==t[Q]}(r)||function(t){t[Q]=[],t[K]=[],t.$on("hook:beforeUpdate",R(Q)),t.$on("hook:updated",R(K))}(r),i(t)?function(t,n,e,o){var r=!o.lazy&&n.length,u=!1,i=[];function c(){e.apply(t,i.reduce(function(t,n){return t[0].push(n.value),t[1].push(n.oldValue),t},[[],[]]))}var f=function(){!1!==r?0==--r&&(r=!1,f=a,c()):(f=a,a())},a=function(){u||(u=!0,q(t,function(){u=!1,c()},o.flush))};return n.forEach(function(n){var e;e=w(n)?function(){return n.value}:n;var r={};i.push(r),r.watcherStopHandle=t.$watch(e,function(t,n){r.value=t,r.oldValue=n,f()},{immediate:!o.lazy,deep:o.deep,sync:"sync"===o.flush})}),function(){i.forEach(function(t){return t.watcherStopHandle()})}}(r,t,n,o):function(t,n,e,o){var r;r=w(n)?function(){return n.value}:n;var u=function(t,n){u=i,o.lazy?i(t,n):e(t,n)},i=function(n,r){q(t,function(){e(n,r)},o.flush)};return t.$watch(r,function(t,n){u(t,n)},{immediate:!o.lazy,deep:o.deep,sync:"sync"===o.flush})}(r,t,n,o)},Object.defineProperty(t,"__esModule",{value:!0})});
