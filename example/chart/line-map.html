<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>e-chart-map</title>
  <style>
    #container>div {
      display: inline-block;
    }
  </style>
</head>

<body>
  <div id="container">
    <div>
      <p>1.地图</p>
      <div id="main" style="width: 400px;height: 400px"></div>
    </div>
    <div>
      <p>2.柱形图</p>
      <div id="main2" style="width: 400px;height: 200px"></div>
    </div>
    <div>
      <p>3.半圆</p>
      <div id="main3" style="width: 300px;height: 300px"></div>
    </div>
    <div>
      <p>4.玫瑰图</p>
      <div id="main4" style="width: 400px;height: 400px"></div>
    </div>

    <div>
      <p>5.双bar图</p>
      <div id="main5" style="width: 400px;height: 200px"></div>
    </div>

    <div>
      <p>6.三角形</p>
      <div id="main6" style="width: 500px;height: 250px"></div>
    </div>

  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/4.2.1/echarts.min.js"></script>
  <script src="https://gallerybox.echartsjs.com/dep/echarts/map/js/china.js"></script>
  <script>

    // 1.地图
    var myChart = echarts.init(
      document.getElementById('main')
    );

    var geoCoordMap = {
      '广东': [113.280637, 23.125178],
      '北京': [116.407387, 39.904179],
    };

    var data = [
      { name: '北京', value: 180 },
      { name: '广东', value: 180 },
    ]

    var moveLine = [
      {
        'coords': [[113.280637, 23.125178], [116.407387, 39.904179]],
      }, {
        'coords': [[116.407387, 39.904179], [113.280637, 23.125178]],
      }
    ]

    var planePath = 'path://M1705.06,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705.06,1318.313z';

    var convertData = function (data) {
      var res = [];
      for (var i = 0; i < data.length; i++) {
        var geoCoord = geoCoordMap[data[i].name];
        if (geoCoord) {
          res.push({
            name: data[i].name,
            value: geoCoord.concat(data[i].value)
          });
        }
      }
      return res;
    };

    var color = ['#3ed4ff', '#ffa022', '#a6c84c'];

    var series = [
      {
        name: 'light',
        type: 'scatter',
        coordinateSystem: 'geo',
        data: convertData(data),
        symbolSize: function (val) {
          return val[2] / 10;
        },
        label: {
          normal: {
            formatter: '{b}',
            position: 'right',
            show: true
          },
          emphasis: {
            show: true
          }
        },
        itemStyle: {
          normal: {
            color: '#F4E925'
          }
        }
      },
      {
        type: 'map',
        map: 'jiangxi',
        geoIndex: 0,
        aspectScale: 0.75, //长宽比
        showLegendSymbol: false, // 存在legend时显示
        label: {
          normal: {
            show: false
          },
          emphasis: {
            show: false,
            textStyle: {
              color: '#fff'
            }
          }
        },
        roam: true,
        itemStyle: {
          normal: {
            areaColor: '#031525',
            borderColor: '#FFFFFF',
          },
          emphasis: {
            areaColor: '#2B91B7'
          }
        },
        animation: false,
        data: data
      },
      {
        name: '圆点',
        type: 'effectScatter',
        coordinateSystem: 'geo',
        data: convertData(data.sort(function (a, b) {
          return b.value - a.value;
        }).slice(0, 5)),
        symbolSize: function (val) {
          return val[2] / 20;
        },
        showEffectOn: 'render',
        rippleEffect: {
          brushType: 'stroke'
        },
        hoverAnimation: true,
        // label: {
        //   normal: {
        //     formatter: '{b}',
        //     position: 'right',
        //     show: true
        //   }
        // },
        itemStyle: {
          normal: {
            color: 'red',
            shadowBlur: 10,
            shadowColor: 'red'
          }
        },
        zlevel: 1
      },
      {
        name: ' 移动的线',
        type: 'lines',
        zlevel: 2,
        effect: {
          show: true,
          period: 5,
          trailLength: 0,
          symbol: planePath,
          symbolSize: 15,

        },
        lineStyle: {
          color: 'yellow',
          width: 2.5,
          opacity: 0.4,
          curveness: 0.14,
          // type: 'dashed'
        },
        data: moveLine
      },
    ]

    option = {
      // backgroundColor: '#001235',
      title: {
        text: '飞机往返',
        // subtext: '数据纯属虚构',
        left: 'center',
        textStyle: {
          color: '#fff'
        }
      },
      tooltip: {
        trigger: 'item',
        formatter(params) {
          if (params.seriesName == '圆点') {
            console.log(params)
            return '圆点'
          }
          console.log(params.seriesName)
          if (params.seriesName == '移动的线') {
            console.log(params, '移动的线')
            return '移动的线'
          }

          // return 1
        }

      },
      legend: {
        orient: 'vertical',
        top: 'bottom',
        left: 'right',
        data: ['北京 Top10', '上海 Top10', '广州 Top10'],
        textStyle: {
          color: '#fff'
        },
        selectedMode: 'single'
      },
      geo: {
        map: 'china',
        label: {
          emphasis: {
            show: false
          }
        },
        roam: true,
        itemStyle: {
          normal: {
            areaColor: '#132937',
            borderColor: '#0692a4'
          },
          emphasis: {
            areaColor: '#0b1c2d'
          }
        },
      },
      series: series
    };

    myChart.setOption(option);

    myChart.on('click', 'series.lines', function (params) {
      console.log(params);
    });

    // 2.柱形图
    var myChart = echarts.init(
      document.getElementById('main2')
    );

    option = {
      tooltip: {
        trigger: 'axis',
        axisPointer: { // 坐标轴指示器，坐标轴触发有效
          type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'
        }
      },
      legend: {
        // data: ['直接访问', '邮件营销']
        show: false,
      },
      grid: {
        left: '3%',
        right: '4%',
        // bottom: '3%',
        containLabel: true
      },
      xAxis: {
        type: 'value',
        show: false,
      },
      yAxis: {
        type: 'category',
        data: ['周一', '周二'],
        show: false,
      },
      series: [{
        name: '直接访问',
        type: 'bar',
        stack: '总量',
        label: {
          normal: {
            show: true,
            position: 'insideRight'
          }
        },
        data: [1, 1.4, 1],
        itemStyle: {
          normal: {
            color(params) {
              var color = ['#aa0c00', '#1e6d74', '#2958b3']
              return color[params.dataIndex]
            }
          }
        }
      },
      {
        name: '邮件营销',
        type: 'bar',
        stack: '总量',
        label: {
          normal: {
            show: true,
            position: 'insideRight'
          }
        },
        data: [0.5, 0.9, 1.5],
        itemStyle: {
          normal: {
            color(params) {
              var color = ['#f7a200', '#3fc8d7', '#44a4ff']
              return color[params.dataIndex]
            }
          }
        }
      },
      ]
    };
    myChart.setOption(option);

    // 3.半圆
    var myChart = echarts.init(
      document.getElementById('main3')
    );

    data = [{
      name: "使用中资源量",
      value: 754
    }, {
      name: "维修中资源量",
      value: 611
    },
    ];

    arrValue = getArrayValue(data, "value");

    sumValue = eval(arrValue.join('+'));
    optionData = getData(data)

    function getArrayValue(array, key) {
      var key = key || "value";
      var res = [];
      if (array) {
        array.forEach(function (t) {
          res.push(t[key]);
        });
      }
      return res;
    }


    function getData(data) {
      var res = {
        series: [],
        yAxis: []
      };
      for (let i = 0; i < data.length; i++) {
        res.series.push({
          name: '',
          type: 'pie',
          clockWise: false, //顺时加载
          hoverAnimation: false, //鼠标移入变大
          radius: [73 - i * 15 + '%', 68 - i * 15 + '%'],
          // center: ["30%", "55%"],
          label: {
            show: false
          },
          itemStyle: {
            label: {
              show: false,
            },
            labelLine: {
              show: false
            },
          },
          data: [{
            value: data[i].value,
            name: data[i].name
          }, {
            value: sumValue - data[i].value,
            name: '',
            itemStyle: {
              color: "rgba(0,0,0,0)",
              borderWidth: 0
            },
            tooltip: {
              show: false
            },
            hoverAnimation: false
          }]
        });
        res.series.push({
          name: '',
          type: 'pie',
          silent: true,
          z: 1,
          clockWise: false, //顺时加载
          hoverAnimation: false, //鼠标移入变大
          radius: [73 - i * 15 + '%', 68 - i * 15 + '%'],
          // center: ["30%", "55%"],
          label: {
            show: false
          },
          itemStyle: {
            label: {
              show: false,
            },
            labelLine: {
              show: false
            },
            borderWidth: 5,
          },
          data: [{
            value: 7.5,
            itemStyle: {
              color: "rgb(3, 31, 62)",
              borderWidth: 0
            },
            tooltip: {
              show: false
            },
            hoverAnimation: false
          }, {
            value: 2.5,
            name: '',
            itemStyle: {
              color: "rgba(0,0,0,0)",
              borderWidth: 0
            },
            tooltip: {
              show: false
            },
            hoverAnimation: false
          }]
        });
        res.yAxis.push((data[i].value / sumValue * 100).toFixed(2) + "%");
      }
      return res;
    }

    option = {
      title: {
        text: '客座率',
        subtext: '-2.4%↓',
        left: 'center',
        bottom: 0,
        textAlign: 'center',
        textStyle: {
          color: '#fff',
          fontSize: 14,
        },
        subtextStyle: {
          color: 'skyblue',
          fontSize: 10,

        },
      },
      backgroundColor: '#000',
      tooltip: {
        show: true,
        trigger: "item",
        formatter: "{a}<br>{b}:{c}({d}%)"
      },
      color: ['rgb(24, 183, 142)', 'rgb(1, 179, 238)', 'rgb(22, 75, 205)', 'rgb(52, 52, 176)'],
      grid: {
        top: '10%',
        bottom: '73%',
        left: "50%",
        containLabel: false
      },
      yAxis: [{
        type: 'category',
        inverse: true,
        axisLine: {
          show: false
        },
        axisTick: {
          show: false
        },
        axisLabel: {
          interval: 0,
          inside: true,
          textStyle: {
            color: "#fff",
            fontSize: 10,
          },
          show: true
        },
        data: optionData.yAxis
      }],
      xAxis: [{
        show: false
      }],
      series: optionData.series
    };

    myChart.setOption(option);

    // 4.玫瑰图
    var myChart = echarts.init(
      document.getElementById('main4')
    );
    option = {
      tooltip: {
        trigger: 'item',
        formatter: "{a} <br/>{b} : {c} ({d}%)"
      },
      // legend: {
      //   x: 'center',
      //   y: 'bottom',
      //   data: ['rose1', 'rose2', 'rose3', 'rose4', 'rose5', 'rose6', 'rose7', 'rose8'],
      //   show: false,
      // },
      toolbox: {
        show: false,
        feature: {
          mark: {
            show: true
          },
          dataView: {
            show: true,
            readOnly: false
          },
          magicType: {
            show: true,
            type: ['pie', 'funnel']
          },
          restore: {
            show: true
          },
          saveAsImage: {
            show: true
          }
        }
      },
      calculable: true,
      series: [{
        name: '平均票价',
        type: 'pie',
        radius: [30, 110],
        roseType: 'area',

        data: [{
          value: 10,
          name: '1'
        },
        {
          value: 5,
          name: '2'
        },
        {
          value: 15,
          name: '3'
        },
        {
          value: 25,
          name: '4'
        },
        {
          value: 20,
          name: '5'
        },
        {
          value: 35,
          name: '6'
        },
        ],
        itemStyle: {
          normal: {
            color(params) {
              var color = ['#aa0c00', '#1e6d74', '#2958b3', '#f7a200', '#3fc8d7', '#44a4ff']
              return color[params.dataIndex]
            }
          }
        }
      }
      ]
    };

    myChart.setOption(option);


    // 5.双bar图
    var myChart = echarts.init(
      document.getElementById('main5')
    );
    option = {
      title: {
        text: "客公里",
        left: "left"
      },
      tooltip: {
        trigger: 'axis',
        axisPointer: { // 坐标轴指示器，坐标轴触发有效
          type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'
        },
        formatter: function (params) {
          return params[0].name +
            "<br>生产中：" + params[0].value +
            "<br>等待中：" + -params[1].value;
        }
      },
      grid: {
        left: '3%',
        right: '4%',
        bottom: '3%',
        containLabel: true
      },
      xAxis: [{
        show: false,
      }],
      yAxis: [{
        type: 'category',
        axisTick: {
          show: false
        },
        show: false,
      }],
      series: [
        {
          name: '等待中',
          type: 'bar',
          stack: '总量',
          label: {
            normal: {
              show: true
            }
          },
          data: [400, 241, 360],
          itemStyle: {
            normal: {
              color(params) {
                var color = ['#aa0c00', '#1e6d74', '#2958b3']
                return color[params.dataIndex]
              }
            }
          }
        },
        {
          name: '生产中',
          type: 'bar',
          stack: '总量',
          label: {
            normal: {
              show: true,
              formatter: function (params) {
                return -params.value
              }
            }
          },
          data: [-120, -180, -120],
          itemStyle: {
            normal: {
              color(params) {
                var color = ['#f7a200', '#3fc8d7', '#44a4ff']
                return color[params.dataIndex]
              }
            }
          }
        }
      ]
    };
    myChart.setOption(option);

    // 6.三角形
    var myChart = echarts.init(
      document.getElementById('main6')
    );


    // 颜色
    var lightBlue = {
      type: 'linear',
      x: 0,
      y: 0,
      x2: 0,
      y2: 1,
      colorStops: [{
        offset: 0,
        color: 'rgba(0, 192, 255, 1)' // 0% 处的颜色
      }, {
        offset: 1,
        color: 'rgba(0, 192, 255, 0.1)' // 100% 处的颜色
      }],
      globalCoord: false // 缺省为 false
    }
    var darkBlue = {
      type: 'linear',
      x: 0,
      y: 0,
      x2: 0,
      y2: 1,
      colorStops: [{
        offset: 0,
        color: 'rgba(41, 121, 255, 1)' // 0% 处的颜色
      }, {
        offset: 1,
        color: 'rgba(41, 121, 255, 0.1)' // 100% 处的颜色
      }],
      globalCoord: false // 缺省为 false
    }


    var data = [
      { value: 4.01 },
      { value: 4.07 },
      { value: 0 },
      { value: 3.52 },
      { value: 3.55 },
      { value: 0 },
      { value: 4.10 },
      { value: 4.19 },
    ]
    // 指定图表的配置项和数据
    var option = {
      title: {
        text: '小时收入',
        top: '2%',
        left: '2%',
        textStyle: {
          color: "#fff",
        },
        subtext: '单位: 万元',
        subtextStyle: {
          align: 'left'
        }
      },
      tooltip: {
        // show: false
      },
      xAxis: {
        type: 'category',
        boundaryGap: true,
        axisLabel: {
          textStyle: {
            color: '#fff',
            fontSize: 12,
          },
          formatter(params) {
            console.log(params)
            return 1;
          }

        },
        show: true,
      },
      yAxis: [{
        show: false,
        min: 0,
      }],
      series: [{
        name: '数量',
        type: 'pictorialBar',
        barCategoryGap: '-75%',
        symbol: 'path://d="M150 0 L75 200 L225 200 Z"',
        label: {
          show: true,
          position: 'top',
          color: '#1798ff',
          fontSize: 14,
          formatter(params) {
            return params.data.value || ''
          }
        },
        itemStyle: {
          color: function (params) {
            return params.dataIndex % 2 ? darkBlue : lightBlue;
          }
        },
        data: data
      }],
      backgroundColor: "#0e2b4f",
    };

    myChart.setOption(option);

    // 水滴圆圈
    // https://gallery.echartsjs.com/editor.html?c=xr1NbmrIZQ

    // 百分比圆
    // clockWise 逆时针旋转
    // https://gallery.echartsjs.com/editor.html?c=x3GHqfOgql
    // https://gallery.echartsjs.com/editor.html?c=xHk0QMuaQ7

    // 柱子顶部有圆圈
    // https://gallery.echartsjs.com/editor.html?c=xOUXVt698w

    // 立体圆柱
    // https://gallery.echartsjs.com/editor.html?c=xc3dnHP_uU

    // 柱子阴影
    // https://gallery.echartsjs.com/editor.html?c=xkZFtowaDl

    // 柱子 clip样式
    // https://gallery.echartsjs.com/editor.html?c=xB17pRWoXf



  </script>
</body>

</html>